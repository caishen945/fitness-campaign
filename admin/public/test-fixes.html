<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¿®å¤æ•ˆæœæµ‹è¯•</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-section h3 { color: #333; margin-top: 0; }
        .btn { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-info { background-color: #17a2b8; color: white; }
        .result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ ä¿®å¤æ•ˆæœæµ‹è¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•VIPç®¡ç†å’Œç”¨æˆ·ä½™é¢ç®¡ç†çš„ä¿®å¤æ•ˆæœã€?/p>

        <div class="test-section">
            <h3>ğŸ“Š åç«¯APIæµ‹è¯•</h3>
            <p>æµ‹è¯•åç«¯APIæ˜¯å¦æ­£å¸¸å·¥ä½œï¼?/p>
            <button class="btn btn-primary" onclick="testVipApi()">æµ‹è¯•VIPç­‰çº§API</button>
            <button class="btn btn-primary" onclick="testUserApi()">æµ‹è¯•ç”¨æˆ·API</button>
            <div id="apiResults"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ VIPç®¡ç†æµ‹è¯•</h3>
            <p>æµ‹è¯•VIPç­‰çº§ç®¡ç†åŠŸèƒ½ï¼?/p>
            <a href="vip-management-fixed.html" class="btn btn-success" target="_blank">æ‰“å¼€VIPç®¡ç†ä¿®å¤ç‰ˆæœ¬</a>
            <p><small>è¿™ä¸ªç‰ˆæœ¬åŒ…å«äº†ä¿®å¤åçš„æ•°æ®åˆ·æ–°æœºåˆ¶å’Œè¯¦ç»†çš„è°ƒè¯•æ—¥å¿—ã€?/small></p>
        </div>

        <div class="test-section">
            <h3>ğŸ’° ç”¨æˆ·ä½™é¢ç®¡ç†æµ‹è¯•</h3>
            <p>æµ‹è¯•ç”¨æˆ·ä½™é¢ç®¡ç†åŠŸèƒ½ï¼?/p>
            <a href="user-balance-test.html" class="btn btn-success" target="_blank">æ‰“å¼€ç”¨æˆ·ä½™é¢ç®¡ç†æµ‹è¯•</a>
            <p><small>è¿™ä¸ªç‰ˆæœ¬æ¨¡æ‹Ÿäº†ç”¨æˆ·ä½™é¢ç®¡ç†çš„æ•°æ®åˆ·æ–°æµç¨‹ã€?/small></p>
        </div>

        <div class="test-section">
            <h3>ğŸ” é—®é¢˜åˆ†ææ€»ç»“</h3>
            <div class="info">
                <h4>å‘ç°çš„é—®é¢˜ï¼š</h4>
                <ul>
                    <li><strong>VIPç®¡ç†é—®é¢˜ï¼?/strong> æ•°æ®åˆ·æ–°æœºåˆ¶å­˜åœ¨ç¼ºé™·ï¼Œè™½ç„¶è°ƒç”¨äº†é‡æ–°åŠ è½½æ–¹æ³•ï¼Œä½†å¯èƒ½å­˜åœ¨å®¹å™¨é€‰æ‹©å™¨æˆ–æ•°æ®æ›´æ–°é—®é¢˜</li>
                    <li><strong>ç”¨æˆ·ä½™é¢ç®¡ç†é—®é¢˜ï¼?/strong> ç±»ä¼¼çš„æ•°æ®åˆ·æ–°é—®é¢˜ï¼Œæ“ä½œæˆåŠŸåæ²¡æœ‰æ­£ç¡®æ›´æ–°æ˜¾ç¤?/li>
                    <li><strong>æµè§ˆå™¨ç¼“å­˜é—®é¢˜ï¼š</strong> ç”¨æˆ·è®¿é—®çš„æ˜¯ç¼–è¯‘åçš„ç¼“å­˜ç‰ˆæœ¬ï¼Œå¯¼è‡´ä¿®æ”¹ä¸ç”Ÿæ•ˆ</li>
                </ul>
                
                <h4>ä¿®å¤æªæ–½ï¼?/h4>
                <ul>
                    <li>æ·»åŠ äº†è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—æ¥è·Ÿè¸ªæ•°æ®åˆ·æ–°æµç¨?/li>
                    <li>åˆ›å»ºäº†ç‹¬ç«‹çš„æµ‹è¯•é¡µé¢é¿å…ç¼“å­˜é—®é¢˜</li>
                    <li>ä¼˜åŒ–äº†æ•°æ®åˆ·æ–°æœºåˆ?/li>
                    <li>æ”¹è¿›äº†é”™è¯¯å¤„ç†å’Œç”¨æˆ·åé¦ˆ</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ“‹ æµ‹è¯•æ­¥éª¤</h3>
            <ol>
                <li>ç‚¹å‡»"æµ‹è¯•VIPç­‰çº§API"å’?æµ‹è¯•ç”¨æˆ·API"æŒ‰é’®ï¼Œç¡®è®¤åç«¯APIæ­£å¸¸å·¥ä½œ</li>
                <li>æ‰“å¼€"VIPç®¡ç†ä¿®å¤ç‰ˆæœ¬"é¡µé¢ï¼Œæµ‹è¯•VIPç­‰çº§çš„ç¼–è¾‘å’Œä¿å­˜åŠŸèƒ½</li>
                <li>æ‰“å¼€"ç”¨æˆ·ä½™é¢ç®¡ç†æµ‹è¯•"é¡µé¢ï¼Œæµ‹è¯•ä½™é¢æ“ä½œåŠŸèƒ?/li>
                <li>è§‚å¯Ÿæ§åˆ¶å°æ—¥å¿—ï¼Œç¡®è®¤æ•°æ®åˆ·æ–°æµç¨‹æ­£å¸¸</li>
                <li>éªŒè¯ä¿®æ”¹åçš„æ•°æ®æ˜¯å¦æ­£ç¡®æ˜¾ç¤º</li>
            </ol>
        </div>
    </div>

    <script>
        async function testVipApi() {
            const resultsDiv = document.getElementById('apiResults');
            resultsDiv.innerHTML = '<div class="info">ğŸ”„ æ­£åœ¨æµ‹è¯•VIPç­‰çº§API...</div>';
            
            try {
                const response = await fetch('http://localhost:3000/api/admin/vip-levels', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    resultsDiv.innerHTML = `
                        <div class="success">
                            âœ?VIPç­‰çº§APIæµ‹è¯•æˆåŠŸï¼?br>
                            è¿”å›äº?${data.data ? data.data.length : 0} ä¸ªVIPç­‰çº§<br>
                            çŠ¶æ€? ${data.success ? 'æˆåŠŸ' : 'å¤±è´¥'}<br>
                            æ¶ˆæ¯: ${data.message || 'æ—?}
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            â?VIPç­‰çº§APIæµ‹è¯•å¤±è´¥ï¼?br>
                            HTTPçŠ¶æ€? ${response.status} ${response.statusText}
                        </div>
                    `;
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error">
                        â?VIPç­‰çº§APIæµ‹è¯•å‡ºé”™ï¼?br>
                        é”™è¯¯: ${error.message}
                    </div>
                `;
            }
        }

        async function testUserApi() {
            const resultsDiv = document.getElementById('apiResults');
            resultsDiv.innerHTML = '<div class="info">ğŸ”„ æ­£åœ¨æµ‹è¯•ç”¨æˆ·API...</div>';
            
            try {
                const response = await fetch('http://localhost:3000/api/admin/users', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    resultsDiv.innerHTML = `
                        <div class="success">
                            âœ?ç”¨æˆ·APIæµ‹è¯•æˆåŠŸï¼?br>
                            è¿”å›äº?${data.data && data.data.users ? data.data.users.length : 0} ä¸ªç”¨æˆ?br>
                            çŠ¶æ€? ${data.success ? 'æˆåŠŸ' : 'å¤±è´¥'}<br>
                            æ¶ˆæ¯: ${data.message || 'æ—?}
                        </div>
                    `;
                } else if (response.status === 401) {
                    resultsDiv.innerHTML = `
                        <div class="info">
                            â„¹ï¸ ç”¨æˆ·APIéœ€è¦è®¤è¯?br>
                            HTTPçŠ¶æ€? ${response.status} ${response.statusText}<br>
                            è¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºç”¨æˆ·ç®¡ç†éœ€è¦ç®¡ç†å‘˜æƒé™
                        </div>
                    `;
                } else {
                    resultsDiv.innerHTML = `
                        <div class="error">
                            â?ç”¨æˆ·APIæµ‹è¯•å¤±è´¥ï¼?br>
                            HTTPçŠ¶æ€? ${response.status} ${response.statusText}
                        </div>
                    `;
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="error">
                        â?ç”¨æˆ·APIæµ‹è¯•å‡ºé”™ï¼?br>
                        é”™è¯¯: ${error.message}
                    </div>
                `;
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•VIP API
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(testVipApi, 1000);
        });
    </script>
</body>
</html>