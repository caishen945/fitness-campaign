<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—å¯¼å…¥æµ‹è¯• - è¯¦ç»†ç‰?/title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
        .warning { color: orange; font-weight: bold; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 5px; overflow: auto; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
        .test-section { margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-title { font-weight: bold; margin-bottom: 10px; }
        .test-result { margin-top: 10px; }
        h2 { margin-top: 30px; }
    </style>
</head>
<body>
    <h1>æ¨¡å—å¯¼å…¥æµ‹è¯• - è¯¦ç»†è°ƒè¯•ç‰?/h1>
    
    <div class="test-section">
        <div class="test-title">ç¯å¢ƒä¿¡æ¯</div>
        <div id="env-info"></div>
    </div>

    <h2>1. æµ‹è¯•ç›¸å¯¹è·¯å¾„å¯¼å…¥</h2>
    <div class="test-section">
        <div class="test-title">ä½¿ç”¨ç›¸å¯¹è·¯å¾„ './pages/UserManagement.js'</div>
        <button id="test-relative">æµ‹è¯•ç›¸å¯¹è·¯å¾„</button>
        <div id="relative-result" class="test-result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯?..</div>
    </div>

    <h2>2. æµ‹è¯•ç»å¯¹è·¯å¾„å¯¼å…¥</h2>
    <div class="test-section">
        <div class="test-title">ä½¿ç”¨ç»å¯¹è·¯å¾„ '/src/pages/UserManagement.js'</div>
        <button id="test-absolute">æµ‹è¯•ç»å¯¹è·¯å¾„</button>
        <div id="absolute-result" class="test-result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯?..</div>
    </div>

    <h2>3. æµ‹è¯•å¸¦æŸ¥è¯¢å‚æ•°çš„å¯¼å…¥</h2>
    <div class="test-section">
        <div class="test-title">ä½¿ç”¨å¸¦æŸ¥è¯¢å‚æ•°çš„è·¯å¾„ '/src/pages/UserManagement.js?v=20250819220000'</div>
        <button id="test-query">æµ‹è¯•å¸¦æŸ¥è¯¢å‚æ•?/button>
        <div id="query-result" class="test-result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯?..</div>
    </div>

    <h2>4. æµ‹è¯•ç›´æ¥è·å–æ–‡ä»¶</h2>
    <div class="test-section">
        <div class="test-title">ä½¿ç”¨fetchç›´æ¥è·å–æ–‡ä»¶å†…å®¹</div>
        <button id="test-fetch">æµ‹è¯•ç›´æ¥è·å–</button>
        <div id="fetch-result" class="test-result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯?..</div>
        <pre id="fetch-content" style="display:none;"></pre>
    </div>

    <h2>5. æµ‹è¯•å…¶ä»–æ¨¡å—</h2>
    <div class="test-section">
        <div class="test-title">æµ‹è¯•å¯¼å…¥ VIPManagement æ¨¡å—</div>
        <button id="test-vip">æµ‹è¯•VIPæ¨¡å—</button>
        <div id="vip-result" class="test-result">ç‚¹å‡»æŒ‰é’®å¼€å§‹æµ‹è¯?..</div>
    </div>

    <script type="module">
        // æ˜¾ç¤ºç¯å¢ƒä¿¡æ¯
        const envInfo = document.getElementById('env-info');
        envInfo.innerHTML = `
            <p>å½“å‰URL: ${window.location.href}</p>
            <p>å½“å‰è·¯å¾„: ${window.location.pathname}</p>
            <p>å½“å‰ä¸»æœº: ${window.location.host}</p>
            <p>å½“å‰åè®®: ${window.location.protocol}</p>
            <p>å½“å‰æ—¶é—´: ${new Date().toLocaleString()}</p>
        `;

        // æµ‹è¯•ç›¸å¯¹è·¯å¾„
        document.getElementById('test-relative').addEventListener('click', async () => {
            const resultEl = document.getElementById('relative-result');
            resultEl.innerHTML = "æµ‹è¯•ä¸?..";
            
            try {
                console.log('å¼€å§‹å¯¼å…¥ç›¸å¯¹è·¯å¾„æ¨¡å?..');
                const importPath = './pages/UserManagement.js';
                console.log('å¯¼å…¥è·¯å¾„:', importPath);
                
                const module = await import(importPath);
                console.log('æ¨¡å—åŠ è½½æˆåŠŸ:', module);
                
                resultEl.innerHTML = `<span class="success">âœ?å¯¼å…¥æˆåŠŸï¼?/span><br>æ¨¡å—ç±»å‹: ${typeof module}<br>é»˜è®¤å¯¼å‡º: ${typeof module.default}`;
            } catch (error) {
                console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
                resultEl.innerHTML = `<span class="error">â?å¯¼å…¥å¤±è´¥:</span><br>${error.message}<br>${error.stack}`;
            }
        });

        // æµ‹è¯•ç»å¯¹è·¯å¾„
        document.getElementById('test-absolute').addEventListener('click', async () => {
            const resultEl = document.getElementById('absolute-result');
            resultEl.innerHTML = "æµ‹è¯•ä¸?..";
            
            try {
                console.log('å¼€å§‹å¯¼å…¥ç»å¯¹è·¯å¾„æ¨¡å?..');
                const importPath = '/src/pages/UserManagement.js';
                console.log('å¯¼å…¥è·¯å¾„:', importPath);
                
                const module = await import(importPath);
                console.log('æ¨¡å—åŠ è½½æˆåŠŸ:', module);
                
                resultEl.innerHTML = `<span class="success">âœ?å¯¼å…¥æˆåŠŸï¼?/span><br>æ¨¡å—ç±»å‹: ${typeof module}<br>é»˜è®¤å¯¼å‡º: ${typeof module.default}`;
            } catch (error) {
                console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
                resultEl.innerHTML = `<span class="error">â?å¯¼å…¥å¤±è´¥:</span><br>${error.message}<br>${error.stack}`;
            }
        });

        // æµ‹è¯•å¸¦æŸ¥è¯¢å‚æ•°çš„è·¯å¾„
        document.getElementById('test-query').addEventListener('click', async () => {
            const resultEl = document.getElementById('query-result');
            resultEl.innerHTML = "æµ‹è¯•ä¸?..";
            
            try {
                console.log('å¼€å§‹å¯¼å…¥å¸¦æŸ¥è¯¢å‚æ•°çš„æ¨¡å?..');
                const importPath = '/src/pages/UserManagement.js?v=20250819220000';
                console.log('å¯¼å…¥è·¯å¾„:', importPath);
                
                const module = await import(importPath);
                console.log('æ¨¡å—åŠ è½½æˆåŠŸ:', module);
                
                resultEl.innerHTML = `<span class="success">âœ?å¯¼å…¥æˆåŠŸï¼?/span><br>æ¨¡å—ç±»å‹: ${typeof module}<br>é»˜è®¤å¯¼å‡º: ${typeof module.default}`;
            } catch (error) {
                console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
                resultEl.innerHTML = `<span class="error">â?å¯¼å…¥å¤±è´¥:</span><br>${error.message}<br>${error.stack}`;
            }
        });

        // æµ‹è¯•ç›´æ¥è·å–æ–‡ä»¶
        document.getElementById('test-fetch').addEventListener('click', async () => {
            const resultEl = document.getElementById('fetch-result');
            const contentEl = document.getElementById('fetch-content');
            resultEl.innerHTML = "æµ‹è¯•ä¸?..";
            contentEl.style.display = 'none';
            
            try {
                console.log('å¼€å§‹ç›´æ¥è·å–æ–‡ä»?..');
                const fetchPath = '/src/pages/UserManagement.js';
                console.log('è·å–è·¯å¾„:', fetchPath);
                
                const response = await fetch(fetchPath);
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);
                }
                
                const content = await response.text();
                console.log('æ–‡ä»¶è·å–æˆåŠŸ, å†…å®¹é•¿åº¦:', content.length);
                
                resultEl.innerHTML = `<span class="success">âœ?è·å–æˆåŠŸï¼?/span><br>å†…å®¹é•¿åº¦: ${content.length} å­—ç¬¦<br>å†…å®¹ç±»å‹: ${response.headers.get('content-type')}`;
                contentEl.textContent = content.slice(0, 500) + '...';
                contentEl.style.display = 'block';
            } catch (error) {
                console.error('æ–‡ä»¶è·å–å¤±è´¥:', error);
                resultEl.innerHTML = `<span class="error">â?è·å–å¤±è´¥:</span><br>${error.message}`;
            }
        });

        // æµ‹è¯•VIPæ¨¡å—
        document.getElementById('test-vip').addEventListener('click', async () => {
            const resultEl = document.getElementById('vip-result');
            resultEl.innerHTML = "æµ‹è¯•ä¸?..";
            
            try {
                console.log('å¼€å§‹å¯¼å…¥VIPç®¡ç†æ¨¡å—...');
                const importPath = '/src/pages/VIPManagement.js';
                console.log('å¯¼å…¥è·¯å¾„:', importPath);
                
                const module = await import(importPath);
                console.log('æ¨¡å—åŠ è½½æˆåŠŸ:', module);
                
                resultEl.innerHTML = `<span class="success">âœ?å¯¼å…¥æˆåŠŸï¼?/span><br>æ¨¡å—ç±»å‹: ${typeof module}<br>é»˜è®¤å¯¼å‡º: ${typeof module.default}`;
            } catch (error) {
                console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
                resultEl.innerHTML = `<span class="error">â?å¯¼å…¥å¤±è´¥:</span><br>${error.message}<br>${error.stack}`;
            }
        });
    </script>
</body>
</html>
